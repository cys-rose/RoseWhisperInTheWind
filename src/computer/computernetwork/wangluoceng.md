# 网络层

## 概述

主要任务是实现网络互联，进而实现数据包在各个网络之间的传输。

## 虚电路服务，数据报服务

1. 虚电路服务：
   1. 面向连接
   2. 可靠通信由网络来保证
   3. 必须简历网络层连接 -> 虚电路（VC）
   4. 通信双方沿着已建立的虚电路发送分组
   5. 通信结束后，需要释放之前建立的虚电路
2. 数据报服务：（因特网使用）
   1. 无连接
   2. 可靠通信由用户主机保证
   3. 每个分组可走不同的路径
   4. 每个分组的首部必须携带目的主机的完整地址
   5. 但所传输的分组可能有误码、丢失、重复、失序的问题
   6. 因特网采用这种设计思想，所以把复杂的网络处理功能置于因特网的边缘（用户注解和内部的传输层，TCP？）所以在 TCP/IP 体系结构的因特网的网络层提供的是简单灵活的、无连接的、尽最大努力交付的数据报服务。

## IPv4

<span style="color: red;">IPv4 地址</span>就是给因特网上每一台主机（或路由器）的每一个接口分配一个在全世界范围内为一个 32 比特的标识符。

### 分类编址的 IPv4 地址

![Alt](./image/分类编址的IPv4.png)

### 划分子网的 IPv4 地址

就是说无论什么类的网络的子网掩码，都是所有的网络号都是 1，主机号都是 0。所以子网掩码可以用来计算网络地址。比如你向一个 IP 地址发送数据，你肯定是知道对方的 IP 地址吧，然后你用对方的 IP 与你的子网掩码做与运算。如果得到的网络地址与你自己的网络地址不一样，就代表你俩不在同一个网络下。
![Alt](./image/划分子网的IPv4地址.png)

### 无分类编制的 IPv4 地址

使用 CIDR（斜线计法）即在 IPv4 地址后面加上 “/”，在斜线后面写上网络前缀所占比特位。e.g. 128.14.35.7/20 就代表前 20 位是网络号，后 12 位是主机号。
